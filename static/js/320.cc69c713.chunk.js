(self.webpackChunkcloudcomsoftware_project=self.webpackChunkcloudcomsoftware_project||[]).push([[320],{9891:function(t,e,n){"use strict";n.r(e),n.d(e,{AuthPage:function(){return b}});var a=n(4165),r=n(5861),s=n(9434),i=n(470),c=n(4895),u=n(1468),o=n(2808),p=n.n(o);function l(t,e,n,a){return d.apply(this,arguments)}function d(){return(d=(0,r.Z)((0,a.Z)().mark((function t(e,n,r,s){var i;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.Z.post("/oauth/token",p().stringify({grant_type:"password",username:e,password:n,client_id:r,client_secret:s})),t.abrupt("return",i);case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function h(){return f.apply(this,arguments)}function f(){return(f=(0,r.Z)((0,a.Z)().mark((function t(){var e;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.Z.get("/api/ver1.0/user/");case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var _=n(184);function b(){var t=(0,i.s0)(),e=(0,s.I0)(),n=(0,s.v9)((function(t){return t.auth})),u=n.login,o=n.password,p=n.appId,d=n.appSecret;function f(t){"login"===t.target.id?e((0,c.R9)(t.target.value)):"password"===t.target.id?e((0,c.FY)(t.target.value)):"app-id"===t.target.id?e((0,c.qh)(t.target.value)):"app-secret"===t.target.id&&e((0,c.YW)(t.target.value))}function b(){e((0,c.R9)("")),e((0,c.FY)("")),e((0,c.qh)("")),e((0,c.YW)("")),sessionStorage.clear()}function x(){return(x=(0,r.Z)((0,a.Z)().mark((function e(n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,l(u,o,p,d).then((function(e){sessionStorage.setItem("accessToken",e.data.access_token),sessionStorage.setItem("refreshToken",e.data.refresh_token),h().then((function(e){sessionStorage.setItem("clientId",String(e.data.client_id)),t("/all-extensions")})).catch((function(t){return b(),t}))})).catch((function(){b(),alert("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437")}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,_.jsx)("div",{className:"auth","data-testid":"auth",children:(0,_.jsxs)("div",{className:"container auth__container",children:[(0,_.jsx)("h1",{className:"heading auth__heading",children:"\u0410\u0443\u0442\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044f"}),(0,_.jsxs)("form",{className:"form auth__form",onSubmit:function(t){return x.apply(this,arguments)},children:[(0,_.jsxs)("label",{className:"form__field",children:["\u0412\u0430\u0448 App ID"," ",(0,_.jsx)("input",{type:"text",onChange:f,value:p,id:"app-id"})]}),(0,_.jsx)("br",{}),(0,_.jsx)("br",{}),(0,_.jsxs)("label",{className:"form__field",children:[" ","\u0412\u0430\u0448 App Secret"," ",(0,_.jsx)("input",{type:"text",onChange:f,value:d,id:"app-secret"})]}),(0,_.jsx)("br",{}),(0,_.jsx)("br",{}),(0,_.jsxs)("label",{className:"form__field",children:["\u041b\u043e\u0433\u0438\u043d"," ",(0,_.jsx)("input",{type:"text",onChange:f,value:u,id:"login"})]}),(0,_.jsx)("br",{}),(0,_.jsx)("br",{}),(0,_.jsxs)("label",{className:"form__field",children:["\u041f\u0430\u0440\u043e\u043b\u044c"," ",(0,_.jsx)("input",{type:"password",onChange:f,value:o,id:"password"})]}),(0,_.jsx)("br",{}),(0,_.jsx)("br",{}),(0,_.jsxs)("div",{className:"auth__buttons",children:[(0,_.jsx)("input",{type:"submit",className:"button button_primary auth__button btn-reset",value:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e"}),(0,_.jsx)("button",{className:"button button_secondary auth__button auth__button_right btn-reset",onClick:function(t){t.preventDefault(),e((0,c.R9)("Muhin_Ivan")),e((0,c.FY)("123qweasdZXC")),e((0,c.qh)("f8115578ec7246369ab37f73adb10c62")),e((0,c.YW)("1e1c99cc6ba94893a7616e2ececaaf28"))},"data-testid":"test_info",children:"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0442\u0435\u0441\u0442\u043e\u0432\u043e\u0439 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0435\u0439"})]})]})]})})}},1468:function(t,e,n){"use strict";var a=n(4569),r=n.n(a)().create({baseURL:"https://apiproxy.telphin.ru/"});r.interceptors.request.use((function(t){return t.headers.Authorization="Bearer ".concat(sessionStorage.getItem("accessToken")),t})),e.Z=r},4654:function(){}}]);
//# sourceMappingURL=320.cc69c713.chunk.js.map