{"version":3,"file":"static/js/70.88070f18.chunk.js","mappings":"2NAIO,SAASA,IACd,IAAMC,GAAKC,EAAAA,EAAAA,QAAyB,MACpC,GAAgDC,EAAAA,EAAAA,WAAS,GAAzD,eAAOC,EAAP,KAAyBC,EAAzB,KACA,GAAsCF,EAAAA,EAAAA,UAAS,IAA/C,eAAOG,EAAP,KAAoBC,EAApB,KAEA,SAASC,IACPP,EAAGQ,QAAU,IAAIC,UAAU,wBAC3BT,EAAGQ,QAAQE,OAAS,WAClBN,GAAoB,EACrB,EACDJ,EAAGQ,QAAQG,QAAU,WACnBP,GAAoB,EACrB,EACDJ,EAAGQ,QAAQI,UAAY,SAACC,GAAD,OAAqBP,EAAeO,EAAEC,KAAtC,CACxB,CAUD,OARAC,EAAAA,EAAAA,YAAU,WACRR,GACD,GAAE,KAOD,gBAAKS,UAAU,YAAf,UACE,iBAAKA,UAAU,iCAAf,WACE,eAAIA,UAAU,6BAAd,wIACA,cAAGA,UAAU,qCAAb,4eAIA,cAAGA,UAAU,qCAAb,qUAGA,cAAGA,UAAU,qCAAb,yTAGCX,GACC,iBAAKW,UAAU,uCAAf,WACE,iBAAMA,UAAU,4BAAhB,6HAEQ,KACR,iBAAMA,UAAU,uBAAhB,SAAwCX,OAG1C,IAGF,iBAAMW,UAAU,oCAAhB,gHAGCb,GACC,iBAAMa,UAAU,kEAAhB,qEAIA,iBAAMA,UAAU,gEAAhB,iFAIF,mBACEA,UAAU,oDACVC,QA3CR,WAAiC,IAAD,EAC9B,UAAAjB,EAAGQ,eAAH,SAAYU,KAAK,kBAClB,EAuCK,2JAMA,mBACEF,UAAU,sDACVC,QAASV,EAFX,wEASP,C","sources":["components/pages/WebsocketPage/WebsocketPage.tsx"],"sourcesContent":["import \"./WebsocketPage.scss\";\r\nimport { useRef, useState } from \"react\";\r\nimport { useEffect } from \"react\";\r\n\r\nexport function WebsocketPage() {\r\n  const ws = useRef<WebSocket | null>(null);\r\n  const [connectionStatus, setConnectionStatus] = useState(false);\r\n  const [luckyNumber, setLuckyNumber] = useState(\"\");\r\n\r\n  function createConnection() {\r\n    ws.current = new WebSocket(\"ws://localhost:12345\");\r\n    ws.current.onopen = () => {\r\n      setConnectionStatus(true);\r\n    };\r\n    ws.current.onclose = () => {\r\n      setConnectionStatus(false);\r\n    };\r\n    ws.current.onmessage = (e: MessageEvent) => setLuckyNumber(e.data);\r\n  }\r\n\r\n  useEffect(() => {\r\n    createConnection();\r\n  }, []);\r\n\r\n  function sendRequestForNumber() {\r\n    ws.current?.send(\"Generate number\");\r\n  }\r\n\r\n  return (\r\n    <div className=\"websocket\">\r\n      <div className=\"container websocket__container\">\r\n        <h1 className=\"heading websocket__heading\">Счастливый добавочный</h1>\r\n        <p className=\"description websocket__description\">\r\n          Здесь вы можете получить счастливый добавочный номер (пока что это\r\n          бесплатно, поторопитесь!)\r\n        </p>\r\n        <p className=\"description websocket__description\">\r\n          Номер генерируется сервером и отправляется по протоколу WebSocket\r\n        </p>\r\n        <p className=\"description websocket__description\">\r\n          Перед тестом нужно запустить локальный сервер из файла server.py\r\n        </p>\r\n        {luckyNumber ? (\r\n          <div className=\"lucky-number websocket__lucky-number\">\r\n            <span className=\"lucky-number__description\">\r\n              Ваш счастливый номер:\r\n            </span>{\" \"}\r\n            <span className=\"lucky-number__number\">{luckyNumber}</span>\r\n          </div>\r\n        ) : (\r\n          \"\"\r\n        )}\r\n\r\n        <span className=\"websocket__connection-description\">\r\n          Статус соединения:\r\n        </span>\r\n        {connectionStatus ? (\r\n          <span className=\"websocket__connection-status websocket__connection-status_green\">\r\n            Соединено\r\n          </span>\r\n        ) : (\r\n          <span className=\"websocket__connection-status websocket__connection-status_red\">\r\n            Разъединено\r\n          </span>\r\n        )}\r\n        <button\r\n          className=\"button button_primary websocket__button btn-reset\"\r\n          onClick={sendRequestForNumber}\r\n        >\r\n          Получить счастливый номер\r\n        </button>\r\n        <button\r\n          className=\"button button_secondary websocket__button btn-reset\"\r\n          onClick={createConnection}\r\n        >\r\n          Реконнект\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["WebsocketPage","ws","useRef","useState","connectionStatus","setConnectionStatus","luckyNumber","setLuckyNumber","createConnection","current","WebSocket","onopen","onclose","onmessage","e","data","useEffect","className","onClick","send"],"sourceRoot":""}